"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[453],{5453:(D,g,a)=>{a.r(g),a.d(g,{RegisterPage:()=>O});var e=a(3953),f=a(177),s=a(4341),m=a(8404);class v{constructor(i){this.formBuilder=i,this.form=this.createForm()}createForm(){return this.formBuilder.group({firstName:["",[s.k0.required]],lastName:["",[s.k0.required]],email:["",[s.k0.required,s.k0.email]],phoneNumber:["",[s.k0.required,s.k0.minLength(10)]],password:["",[s.k0.required,s.k0.minLength(6)]],confirmPassword:["",[s.k0.required]]},{validator:this.passwordMatchValidator})}passwordMatchValidator(i){return i.controls.password.value===i.controls.confirmPassword.value?null:{mismatch:!0}}getForm(){return this.form}}var d=a(1626);let N=(()=>{var o;class i{constructor(t){this.http=t,this.baseUrl="http://localhost:6868",this.mySqlURL="http://localhost:6868/api/users"}checkUserExists(t){return console.log(t),this.http.get(this.mySqlURL+`/find/${t.email}`,{headers:{"content-type":"application/json"}})}registerUser(t){const l=JSON.stringify(t);return console.log(t),this.http.post(this.mySqlURL+"/register",l,{headers:{"content-type":"application/json"}})}sendEmailConfirm(t){const l=JSON.stringify(t);return console.log(t),this.http.post(this.baseUrl+"/confirmEmail",l,{headers:{"content-type":"application/json"}})}}return(o=i).\u0275fac=function(t){return new(t||o)(e.KVO(d.Qq))},o.\u0275prov=e.jDH({token:o,factory:o.\u0275fac,providedIn:"root"}),i})();var j=a(8986);const w=["removeEmailError"],y=["removePasswordError"];function T(o,i){1&o&&(e.j41(0,"ion-label",16),e.EFF(1,"First name is required"),e.k0s())}function G(o,i){1&o&&(e.j41(0,"ion-label",16),e.EFF(1,"Last name is required"),e.k0s())}function I(o,i){1&o&&(e.j41(0,"ion-label",16),e.EFF(1,"Email is required"),e.k0s())}function U(o,i){1&o&&(e.j41(0,"ion-label",16),e.EFF(1,"Email is invalid"),e.k0s())}function $(o,i){if(1&o&&(e.j41(0,"ion-label",16,0),e.EFF(2),e.k0s()),2&o){const n=e.XpG();e.R7$(2),e.JRh(n.emailError.undefined)}}function q(o,i){1&o&&(e.j41(0,"ion-label",16,0),e.EFF(2,"User Exists!"),e.k0s())}function C(o,i){1&o&&(e.j41(0,"ion-label",16),e.EFF(1,"Phone number is required"),e.k0s())}function Y(o,i){1&o&&(e.j41(0,"ion-label",16),e.EFF(1,"Phone number is invalid"),e.k0s())}function S(o,i){1&o&&(e.j41(0,"ion-label",16),e.EFF(1,"Phone number must be 10 digits"),e.k0s())}function L(o,i){1&o&&(e.j41(0,"ion-label",16),e.EFF(1,"Password is required"),e.k0s())}function B(o,i){1&o&&(e.j41(0,"ion-label",16),e.EFF(1,"Password must be more than 6 characters"),e.k0s())}function J(o,i){if(1&o&&(e.j41(0,"ion-label",16,1),e.EFF(2),e.k0s()),2&o){const n=e.XpG();e.R7$(2),e.JRh(n.passwordError.undefined)}}function X(o,i){1&o&&(e.j41(0,"ion-label",16),e.EFF(1,"Please re-enter password"),e.k0s())}function M(o,i){1&o&&(e.j41(0,"ion-label",16),e.EFF(1,"Passwords don't match."),e.k0s())}let O=(()=>{var o;class i{constructor(t,r,l,u){this.router=t,this.formBuilder=r,this.renderer=u,this.thisEmailError=e.aKT,this.thisPasswordError=e.aKT,this.form=s.gE,this.userInfo=[],this.dataService=(0,e.WQX)(N)}ngOnInit(){this.form=new v(this.formBuilder).createForm(),console.log(this.form)}goToLogin(){this.router.navigateByUrl("/login")}submitRegistration(t){console.log(t),this.dataService.checkUserExists(t).subscribe(r=>{this.checkExistingUser=r.status,console.log(r),1!=this.checkExistingUser?this.dataService.registerUser(t).subscribe(l=>{console.log(l),this.data=l,1==this.data.status&&(this.router.navigateByUrl("/login"),this.dataService.sendEmailConfirm(t).subscribe(u=>{console.log(u)}))}):(this.userExists=r.message,this.hideEmailError(this.userExists))})}hideEmailError(t){setTimeout(()=>{this.removeEmailError=1},3e3)}}return(o=i).\u0275fac=function(t){return new(t||o)(e.rXU(j.Ix),e.rXU(s.ok),e.rXU(d.Qq),e.rXU(e.sFG))},o.\u0275cmp=e.VBU({type:o,selectors:[["app-register"]],viewQuery:function(t,r){if(1&t&&(e.GBs(w,5),e.GBs(y,5)),2&t){let l;e.mGM(l=e.lsd())&&(r.thisEmailError=l.first),e.mGM(l=e.lsd())&&(r.thisPasswordError=l.first)}},standalone:!0,features:[e.aNF],decls:44,vars:16,consts:[["removeEmailError",""],["removePasswordError",""],["slot","start"],["color","success"],[1,"flex-center"],[3,"ngSubmit","formGroup"],["color","success","formControlName","firstName","aria-required","true","label","First Name","labelPlacement","floating","type","text"],["class","errorLabel","color","danger",4,"ngIf"],["label","Last Name","color","success","formControlName","lastName","labelPlacement","floating","type","text"],["formControlName","email","label","Email","labelPlacement","floating","color","success","type","email"],["color","danger","class","errorLabel",4,"ngIf"],["label","Phone Number","formControlName","phoneNumber","labelPlacement","floating","color","success","maxLength","10"],["label","Create Password","formControlName","password","labelPlacement","floating","color","success","type","password"],["label","Confirm Password","labelPlacement","floating","formControlName","confirmPassword","type","password","color","success"],["type","submit","color","success","size","full",3,"disabled"],["color","success","fill","clear","size","full",3,"click"],["color","danger",1,"errorLabel"]],template:function(t,r){if(1&t&&(e.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",2),e.nrm(3,"ion-back-button",3),e.k0s(),e.j41(4,"ion-title",3),e.EFF(5,"Fresh Finds"),e.k0s()()(),e.j41(6,"ion-content")(7,"div",4)(8,"form",5),e.bIt("ngSubmit",function(){return r.submitRegistration(r.form.value)}),e.j41(9,"ion-card")(10,"ion-card-header")(11,"ion-card-title",3),e.EFF(12,"Register"),e.k0s()(),e.j41(13,"ion-card-content")(14,"ion-item"),e.nrm(15,"ion-input",6),e.k0s(),e.DNE(16,T,2,0,"ion-label",7),e.j41(17,"ion-item"),e.nrm(18,"ion-input",8),e.k0s(),e.DNE(19,G,2,0,"ion-label",7),e.j41(20,"ion-item"),e.nrm(21,"ion-input",9),e.k0s(),e.DNE(22,I,2,0,"ion-label",7)(23,U,2,0,"ion-label",7)(24,$,3,1,"ion-label",10)(25,q,3,0,"ion-label",10),e.j41(26,"ion-item"),e.nrm(27,"ion-input",11),e.k0s(),e.DNE(28,C,2,0,"ion-label",7)(29,Y,2,0,"ion-label",7)(30,S,2,0,"ion-label",7),e.j41(31,"ion-item"),e.nrm(32,"ion-input",12),e.k0s(),e.DNE(33,L,2,0,"ion-label",7)(34,B,2,0,"ion-label",7)(35,J,3,1,"ion-label",7),e.j41(36,"ion-item"),e.nrm(37,"ion-input",13),e.k0s(),e.DNE(38,X,2,0,"ion-label",7)(39,M,2,0,"ion-label",10),e.j41(40,"ion-button",14),e.EFF(41," Create Account "),e.k0s(),e.j41(42,"ion-button",15),e.bIt("click",function(){return r.goToLogin()}),e.EFF(43," Login "),e.k0s()()()()()()),2&t){let l,u,h,p,c,b,_,E,R,P,F,k;e.R7$(8),e.Y8G("formGroup",r.form),e.R7$(8),e.Y8G("ngIf",r.form.get("firstName").touched&&(null==(l=r.form.get("firstName").errors)?null:l.required)),e.R7$(3),e.Y8G("ngIf",r.form.get("lastName").touched&&(null==(u=r.form.get("lastName").errors)?null:u.required)),e.R7$(3),e.Y8G("ngIf",r.form.get("email").touched&&(null==(h=r.form.get("email").errors)?null:h.required)),e.R7$(),e.Y8G("ngIf",r.form.get("email").touched&&(null==(p=r.form.get("email").errors)?null:p.email)),e.R7$(),e.Y8G("ngIf",r.emailError),e.R7$(),e.Y8G("ngIf",r.userExists&&!(null!=(c=r.form.get("email").errors)&&c.required)&&!(null!=(c=r.form.get("email").errors)&&c.email)&&!r.removeEmailError),e.R7$(3),e.Y8G("ngIf",r.form.get("phoneNumber").touched&&(null==(b=r.form.get("phoneNumber").errors)?null:b.required)),e.R7$(),e.Y8G("ngIf",r.form.get("phoneNumber").touched&&(null==(_=r.form.get("phoneNumber").errors)?null:_.phoneNumber)),e.R7$(),e.Y8G("ngIf",r.form.get("phoneNumber").touched&&(null==(E=r.form.get("phoneNumber").errors)?null:E.minlength)),e.R7$(3),e.Y8G("ngIf",r.form.get("password").touched&&(null==(R=r.form.get("password").errors)?null:R.required)),e.R7$(),e.Y8G("ngIf",r.form.get("password").touched&&(null==(P=r.form.get("password").errors)?null:P.minlength)),e.R7$(),e.Y8G("ngIf",r.passwordError),e.R7$(3),e.Y8G("ngIf",r.form.get("confirmPassword").touched&&(null==(F=r.form.get("confirmPassword").errors)?null:F.required)),e.R7$(),e.Y8G("ngIf",(null==r.form.errors?null:r.form.errors.mismatch)&&r.form.controls.confirmPassword.dirty&&!(null!=(k=r.form.get("confirmPassword").errors)&&k.required)),e.R7$(),e.Y8G("disabled",!r.form.valid)}},dependencies:[m.W9,m.eU,m.BC,m.ai,f.MD,f.bT,s.YN,s.qT,s.BC,s.cb,m.$w,m.Jm,m.el,s.X1,s.j4,s.JD],styles:[".hideThisError[_ngcontent-%COMP%]{display:none}.showThisError[_ngcontent-%COMP%]{display:block}"]}),i})()}}]);