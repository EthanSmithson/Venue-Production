"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[56],{3056:(S,d,a)=>{a.r(d),a.d(d,{LoginPage:()=>j});var e=a(3953),h=a(177),n=a(4341),m=a(7851);class E{constructor(t){this.formBuilder=t}createForm(){return this.formBuilder.group({email:["",[n.k0.required,n.k0.email]],password:["",[n.k0.required]]})}}var g=a(1626);let p=(()=>{var o;class t{constructor(i){this.http=i,this.baseUrl="http://localhost:8080/"}loginUser(i){return JSON.stringify(i),this.http.get(this.baseUrl+`api/users/login/${i.email}/${i.password}`,{headers:{"content-type":"application/json"}})}isConfirmed(i){return JSON.stringify(i),this.http.get(this.baseUrl+`api/users/login/${i.email}`,{headers:{"content-type":"application/json"}})}}return(o=t).\u0275fac=function(i){return new(i||o)(e.KVO(g.Qq))},o.\u0275prov=e.jDH({token:o,factory:o.\u0275fac,providedIn:"root"}),t})(),b=(()=>{var o;class t{constructor(i){this.http=i,this.baseUrl="http://localhost:8080/"}checkUserExists(i){return console.log(i),this.http.get(this.baseUrl+`api/users/find/${i.email}`,{headers:{"content-type":"application/json"}})}sendRestEmail(i){const r=JSON.stringify(i);return this.http.post(this.baseUrl+"resetEmail",r,{headers:{"content-type":"application/json"}})}}return(o=t).\u0275fac=function(i){return new(i||o)(e.KVO(g.Qq))},o.\u0275prov=e.jDH({token:o,factory:o.\u0275fac,providedIn:"root"}),t})();var v=a(8986),k=a(2490);const F=["removeEmailError"],R=["removePasswordError"];function _(o,t){1&o&&(e.j41(0,"ion-label",12),e.EFF(1,"Email is required"),e.k0s())}function L(o,t){1&o&&(e.j41(0,"ion-label",12),e.EFF(1,"Email is invalid"),e.k0s())}function P(o,t){if(1&o&&(e.j41(0,"ion-label",12,0),e.EFF(2),e.k0s()),2&o){const l=e.XpG();e.R7$(2),e.JRh(l.emailError.undefined)}}function U(o,t){if(1&o&&(e.j41(0,"ion-label",12,0),e.EFF(2),e.k0s()),2&o){const l=e.XpG();e.R7$(2),e.JRh(l.userDoesNotExists)}}function N(o,t){1&o&&(e.j41(0,"ion-label",12),e.EFF(1,"Password is required"),e.k0s())}function y(o,t){if(1&o&&(e.j41(0,"ion-label",12,1),e.EFF(2),e.k0s()),2&o){const l=e.XpG();e.R7$(2),e.JRh(l.passwordError.undefined)}}let j=(()=>{var o;class t{constructor(i,s,r,c){this.router=i,this.formBuilder=s,this.renderer=r,this.cookieService=c,this.thisEmailError=e.aKT,this.thisPasswordError=e.aKT,this.form=n.gE,this.dataService=(0,e.WQX)(p),this.emailReset=(0,e.WQX)(b)}ngOnInit(){var i;let s;this.form=new E(this.formBuilder).createForm(),s=null===(i=this.form.get("email"))||void 0===i?void 0:i.valid,console.log(this.form)}goToRegister(){this.router.navigateByUrl("/register")}goToHome(){this.router.navigateByUrl("/home")}submitLogin(i){this.dataService.loginUser(i).subscribe(s=>{this.data=s,console.log(this.data),1==this.data.status?this.dataService.isConfirmed(i).subscribe(r=>{this.isConfirmed=r.status,console.log("Am I confirmed "+this.isConfirmed),1==this.isConfirmed?(this.router.navigateByUrl("/home"),this.cookieService.set("myCookie",i.email)):(this.userDoesNotExists="User is not Confirmed!",this.hideEmailError(this.userDoesNotExists))}):2==this.data.status?(this.userDoesNotExists="This User Does Not Exist!",this.hideEmailError(this.userDoesNotExists)):(console.log(this.data.errors[0]),this.emailError=this.data.errors[0],this.passwordError=this.data.errors[1])})}hideEmailError(i){setTimeout(()=>{this.removeUserDoesNotExists=1},3e3)}resetEmail(i){this.emailReset.checkUserExists(i).subscribe(s=>{this.checkEmailResetExists=s.status,console.log(this.checkEmailResetExists),1==this.checkEmailResetExists?this.emailReset.sendRestEmail(i).subscribe(r=>{this.data=r}):(this.userDoesNotExists="User Does Not Exist!",this.hideEmailNotExistsError(this.userDoesNotExists))})}hideEmailNotExistsError(i){setTimeout(()=>{this.removeUserDoesNotExists=1},3e3)}}return(o=t).\u0275fac=function(i){return new(i||o)(e.rXU(v.Ix),e.rXU(n.ok),e.rXU(e.sFG),e.rXU(k.O))},o.\u0275cmp=e.VBU({type:o,selectors:[["app-login"]],viewQuery:function(i,s){if(1&i&&(e.GBs(F,5),e.GBs(R,5)),2&i){let r;e.mGM(r=e.lsd())&&(s.thisEmailError=r.first),e.mGM(r=e.lsd())&&(s.thisPasswordError=r.first)}},standalone:!0,features:[e.aNF],decls:28,vars:9,consts:[["removeEmailError",""],["removePasswordError",""],["color","success"],[1,"flex-center"],[3,"ngSubmit","formGroup"],["label","Email","formControlName","email","labelPlacement","floating","type","email","color","success"],["class","errorLabel","color","danger",4,"ngIf"],["color","danger","class","errorLabel",4,"ngIf"],["label","Password","formControlName","password","labelPlacement","floating","color","success","type","password"],["color","dark","size","full","fill","clear",3,"click","disabled"],["color","success","size","full","type","submit",3,"disabled"],["color","success","fill","clear","size","full",3,"click"],["color","danger",1,"errorLabel"]],template:function(i,s){if(1&i&&(e.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-title",2),e.EFF(3,"ShipIt"),e.k0s()()(),e.j41(4,"ion-content")(5,"div",3)(6,"form",4),e.bIt("ngSubmit",function(){return s.submitLogin(s.form.value)}),e.j41(7,"ion-card")(8,"ion-card-header")(9,"ion-card-title",2),e.EFF(10,"Login"),e.k0s()(),e.j41(11,"ion-card-content")(12,"ion-item"),e.nrm(13,"ion-input",5),e.k0s(),e.DNE(14,_,2,0,"ion-label",6)(15,L,2,0,"ion-label",6)(16,P,3,1,"ion-label",7)(17,U,3,1,"ion-label",7),e.j41(18,"ion-item"),e.nrm(19,"ion-input",8),e.k0s(),e.DNE(20,N,2,0,"ion-label",6)(21,y,3,1,"ion-label",6),e.j41(22,"ion-button",9),e.bIt("click",function(){return s.resetEmail(s.form.value)}),e.EFF(23," forgot email/password "),e.k0s(),e.j41(24,"ion-button",10),e.EFF(25," Login "),e.k0s(),e.j41(26,"ion-button",11),e.bIt("click",function(){return s.goToRegister()}),e.EFF(27," Register "),e.k0s()()()()()()),2&i){let r,c,u,f;e.R7$(6),e.Y8G("formGroup",s.form),e.R7$(8),e.Y8G("ngIf",s.form.get("email").touched&&(null==(r=s.form.get("email").errors)?null:r.required)),e.R7$(),e.Y8G("ngIf",s.form.get("email").touched&&(null==(c=s.form.get("email").errors)?null:c.email)),e.R7$(),e.Y8G("ngIf",s.emailError&&!s.removeEmailError),e.R7$(),e.Y8G("ngIf",s.userDoesNotExists&&!s.removeEmailError&&!(null!=(u=s.form.get("email").errors)&&u.required)&&!(null!=(u=s.form.get("email").errors)&&u.email)&&!s.removeUserDoesNotExists),e.R7$(3),e.Y8G("ngIf",s.form.get("password").touched&&(null==(f=s.form.get("password").errors)?null:f.required)),e.R7$(),e.Y8G("ngIf",s.passwordError),e.R7$(),e.Y8G("disabled",!s.form.get("email").valid),e.R7$(2),e.Y8G("disabled",!s.form.valid)}},dependencies:[m.W9,m.eU,m.BC,m.ai,h.MD,h.bT,n.YN,n.qT,n.BC,n.cb,m.$w,n.X1,n.j4,n.JD,m.Jm],styles:["ion-button[color=dark][_ngcontent-%COMP%]{text-transform:initial}"]}),t})()}}]);